<main style="margin: 0; padding: 0; box-sizing: border-box">
  <iframe src="https://mitid.eu.pythonanywhere.com/" height="510"></iframe>
  <script>
    window.addEventListener("message", async (event) => {
      jwt_token = event.data;
      console.log(jwt_token);
      let headers = { "Content-Type": "application/json" };
      if (jwt_token) {
        headers["Authorization"] = `Bearer ${jwt_token}`;
      }
      let conn = await fetch("/api-login", {
        method: "POST",
        headers,
      });
      if (conn.status == 200) {
        window.location.replace("/2fa");
      } else {
        alert("Authentication Error, try again");
        window.location.replace("/");
      }
    });
  </script>
</main>
